# Story 8.1: Detalhe Oportunidade Mobile

**Epic**: EPIC-008 UX Mobile | **Status**: Draft | **Prioridade**: P0 | **Estimativa**: 2-3 horas

## Story
Como vendedor mobile, quero visualizar e editar detalhes de oportunidades em dispositivos móveis sem layout quebrado.

## AC
1. **Layout Responsivo 3 Colunas:**
   - Mobile (<768px): Stack vertical (Info → Tabs → Cliente/Responsável)
   - Tablet (768-1024px): 2 colunas (Info+Cliente | Tabs)
   - Desktop (>1024px): 3 colunas (atual)

2. **Tabs Responsivas:**
   - Mobile: Grid 3x2 (não scroll horizontal)
   - Desktop: Tabs horizontais (atual)
   - Indicador visual claro de tab ativa

3. **Botões de Ação:**
   - Mobile: Dropdown menu "Ações ▾" (shadcn/ui)
   - Desktop: Botões horizontais (atual)
   - 4 ações: Marcar Venda, Marcar Perda, Editar, Excluir

4. **Touch Targets:**
   - Botões mínimo 44x44px (iOS/Android guideline)
   - Tabs com padding adequado para toque

## Tasks
- [ ] Refatorar layout grid para flex com order utilities
- [ ] Criar DropdownMenu component ou usar shadcn/ui
- [ ] Converter tabs para grid 3x2 em mobile
- [ ] Ajustar touch targets (p-2 → p-3, w-4 → w-5)
- [ ] Adicionar ARIA labels nos botões de ícone
- [ ] Testar em iPhone SE (375px) e iPad (768px)

## Dev Notes
**Arquivos afetados:**
- `src/pages/DetalheOportunidade.tsx:174` - Layout grid
- `src/pages/DetalheOportunidade.tsx:163-168` - Botões de ação
- `src/pages/DetalheOportunidade.tsx:192-196` - Tabs

**Solução Layout:**
```tsx
<div className="flex flex-col lg:grid lg:grid-cols-12 gap-4 md:gap-6">
  {/* Mobile order: Tabs (1) → Info (2) → Cliente (3) */}
  <main className="order-1 lg:order-2 lg:col-span-6">
    {/* Tabs */}
  </main>
  <aside className="order-2 lg:order-1 lg:col-span-3">
    {/* Info sidebar */}
  </aside>
  <aside className="order-3 lg:col-span-3">
    {/* Cliente/Responsável */}
  </aside>
</div>
```

**Solução Tabs:**
```tsx
<nav className="grid grid-cols-3 gap-2 md:flex md:gap-0">
  {tabs.map((tab) => (
    <button className={`
      px-3 py-2 text-xs md:text-sm
      rounded-lg md:rounded-none
      ${activeTab ? 'bg-[#e90101] text-white' : 'bg-white/5 text-gray-400'}
    `}>
      {tab.label}
    </button>
  ))}
</nav>
```

**Solução Botões Ação:**
Usar `<DropdownMenu>` do shadcn/ui ou criar custom:
```tsx
{/* Mobile */}
<DropdownMenu>
  <DropdownMenuTrigger className="md:hidden">Ações ▾</DropdownMenuTrigger>
  <DropdownMenuContent>
    <DropdownMenuItem><ThumbsUp /> Marcar Venda</DropdownMenuItem>
    <DropdownMenuItem><ThumbsDown /> Marcar Perda</DropdownMenuItem>
    <DropdownMenuItem><Settings /> Editar</DropdownMenuItem>
    <DropdownMenuItem variant="danger"><Trash2 /> Excluir</DropdownMenuItem>
  </DropdownMenuContent>
</DropdownMenu>

{/* Desktop */}
<div className="hidden md:flex gap-2">
  {/* Botões atuais */}
</div>
```

**Componentes a Criar:**
- `DropdownMenu` (shadcn/ui recommended) OU
- `ActionMenu` molecule (<50 linhas)

**Protocol Notecraft:**
- Manter limites de linhas após refatoração
- DetalheOportunidade.tsx já está em 261 linhas (perto do limite de organism)
- Considerar extrair tabs para `OpportunityTabs` component

**Testes Mobile:**
- iPhone SE (375px width)
- iPhone 12 Pro (390px)
- iPad (768px)
- Samsung Galaxy S20 (360px)
