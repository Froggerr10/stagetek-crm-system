# Story 8.4: Dashboard Mobile - Ajustes Finos

**Epic**: EPIC-008 UX Mobile | **Status**: Draft | **Prioridade**: P1 | **Estimativa**: 30 min - 1 hora

---

## üìù Story

Como **vendedor mobile**, quero visualizar o dashboard em dispositivos m√≥veis com **gr√°ficos leg√≠veis** e **m√©tricas acess√≠veis**, para acompanhar performance em campo sem depender do desktop.

---

## ‚úÖ Status Atual (Descoberta)

**√ìTIMA NOT√çCIA**: Dashboard j√° est√° **80-90% mobile-ready**! üéâ

### O Que J√Å Funciona Bem ‚úÖ
- **StatsGrid**: Grid responsivo (`grid-cols-1 md:grid-cols-2 xl:grid-cols-4`)
- **Charts**: Recharts com `ResponsiveContainer` (width="100%")
- **OpportunitiesTable**: Alterna entre Table (desktop) e Cards (mobile)
- **Breadcrumb**: Vis√≠vel e funcional

**Arquivo**: `src/pages/Dashboard.tsx` (46 linhas, limpo e simples)

---

## üîç Problemas Identificados (Ajustes Finos)

### P1: Gr√°ficos Lado a Lado em Mobile
**Problema**:
- Desktop: 2 gr√°ficos lado a lado (`lg:grid-cols-2`)
- Mobile (<1024px): Ainda mostra 2 colunas em tablets?
- Gr√°ficos podem ficar estreitos demais

**C√≥digo Atual** (`Dashboard.tsx:21`):
```tsx
<div className="grid grid-cols-1 lg:grid-cols-2 gap-4 mb-6">
  <div>SalesLineChart</div>
  <div>FunnelPieChart</div>
</div>
```

**Solu√ß√£o**:
- For√ßar stack vertical em mobile e tablet
- Apenas desktop large (‚â•1024px) mostra lado a lado

```tsx
<div className="grid grid-cols-1 lg:grid-cols-2 gap-4 mb-6">
  {/* J√° est√° correto! */}
</div>
```

**Status**: ‚úÖ **J√° est√° correto!** (lg breakpoint = 1024px)

---

### P2: Padding Inconsistente
**Problema**:
- `p-4 md:p-8` - OK
- Mas cards de gr√°ficos t√™m `p-6` fixo

**C√≥digo Atual** (`Dashboard.tsx:22, 27`):
```tsx
<div className="... p-6">
  <h3>Vendas ao Longo do Tempo</h3>
  <SalesLineChart />
</div>
```

**Solu√ß√£o**:
```tsx
<div className="... p-4 md:p-6">
  {/* Menos padding em mobile */}
</div>
```

**Impacto**: Econ√¥mica ~16px verticais em mobile (2 cards √ó 8px)

---

### P3: Altura Fixa dos Gr√°ficos
**Problema**:
- `height={256}` pode ser muito alto para telas pequenas
- iPhone SE (667px altura) - gr√°fico ocupa 38% da tela

**C√≥digo Atual** (`SalesLineChart.tsx:19`):
```tsx
<ResponsiveContainer width="100%" height={256}>
```

**Solu√ß√£o**:
```tsx
<ResponsiveContainer width="100%" height={200}> {/* Mobile */}
// OU
<div className="h-48 md:h-64"> {/* 192px mobile, 256px desktop */}
  <ResponsiveContainer width="100%" height="100%">
```

**Recomenda√ß√£o**: Usar classes Tailwind para height responsivo

---

### P4: Footer com Protocol Notecraft‚Ñ¢
**Problema**:
- Footer est√° OK, mas pode ser simplificado em mobile

**C√≥digo Atual** (`Dashboard.tsx:37-42`):
```tsx
<footer className="mt-8 pt-6 border-t border-white/10 text-center">
  <p className="flex items-center justify-center gap-1 text-xs text-gray-500">
    Built with <Heart className="w-3 h-3 text-[#e90101]" /> following Protocol Notecraft‚Ñ¢
  </p>
  <p className="text-xs text-gray-500 mt-1">STAGETEK Engineering Team</p>
</footer>
```

**Solu√ß√£o**: Manter como est√°, √© apenas informativo ‚úÖ

---

## ‚úÖ Acceptance Criteria (AC)

### AC1: Gr√°ficos Stack Vertical Mobile
- [ ] Mobile (<1024px): Gr√°ficos empilhados verticalmente
- [ ] Desktop (‚â•1024px): Gr√°ficos lado a lado
- [ ] ‚úÖ **J√° implementado** via `grid-cols-1 lg:grid-cols-2`

### AC2: Padding Responsivo nos Cards
- [ ] Mobile: `p-4` nos cards de gr√°ficos
- [ ] Desktop: `p-6` nos cards de gr√°ficos
- [ ] Economia de espa√ßo vertical sem comprometer legibilidade

### AC3: Altura dos Gr√°ficos Responsiva
- [ ] Mobile: Altura reduzida (192px ou 200px)
- [ ] Desktop: Altura normal (256px)
- [ ] Gr√°ficos leg√≠veis em ambos os tamanhos

### AC4: Touch Targets Adequados
- [ ] Bot√£o "Ver todas" tem m√≠nimo 44x44px de √°rea clic√°vel
- [ ] Links de oportunidades (dentro de OpportunityCard) adequados

### AC5: Valida√ß√£o Cross-Device
- [ ] Testar em iPhone SE (375px)
- [ ] Testar em iPad (768px)
- [ ] Lighthouse Mobile Score ‚â• 85

---

## üéØ Tasks

### Task 1: Padding Responsivo nos Cards de Gr√°ficos (5 min)
- [ ] Alterar `p-6` para `p-4 md:p-6` em ambos os cards
- [ ] Arquivo: `src/pages/Dashboard.tsx:22, 27`

### Task 2: Altura Responsiva dos Gr√°ficos (10 min)
- [ ] Alterar `SalesLineChart.tsx:19` - `height={256}` para `height="100%"`
- [ ] Envolver `<ResponsiveContainer>` em `<div className="h-48 md:h-64">`
- [ ] Fazer o mesmo para `FunnelPieChart.tsx`

### Task 3: Validar OpportunityCard Touch Targets (10 min)
- [ ] Verificar `OpportunityCard.tsx` - bot√µes t√™m `p-3` m√≠nimo?
- [ ] Link do t√≠tulo tem √°rea clic√°vel adequada?
- [ ] Ajustar se necess√°rio

### Task 4: Testes Mobile (15 min)
- [ ] Abrir `http://localhost:5173` em Chrome DevTools (375px)
- [ ] Testar scroll, cliques, legibilidade
- [ ] Validar gr√°ficos renderizam corretamente
- [ ] Lighthouse audit mobile

---

## üìê Dev Notes

### Arquivos Afetados
- `src/pages/Dashboard.tsx` (46 linhas) - Padding dos cards
- `src/components/molecules/SalesLineChart.tsx` (42 linhas) - Altura
- `src/components/molecules/FunnelPieChart.tsx` - Altura (similar)
- `src/components/molecules/OpportunityCard.tsx` - Touch targets (valida√ß√£o)

### Mudan√ßas Espec√≠ficas

**Dashboard.tsx** (antes):
```tsx
<div className="bg-[rgba(255,255,255,0.08)] ... p-6">
  <h3 className="text-lg font-semibold text-white mb-4">Vendas ao Longo do Tempo</h3>
  <SalesLineChart />
</div>
```

**Dashboard.tsx** (depois):
```tsx
<div className="bg-[rgba(255,255,255,0.08)] ... p-4 md:p-6">
  <h3 className="text-base md:text-lg font-semibold text-white mb-3 md:mb-4">Vendas ao Longo do Tempo</h3>
  <div className="h-48 md:h-64">
    <SalesLineChart />
  </div>
</div>
```

**SalesLineChart.tsx** (antes):
```tsx
<ResponsiveContainer width="100%" height={256}>
  <LineChart data={data}>
```

**SalesLineChart.tsx** (depois):
```tsx
<ResponsiveContainer width="100%" height="100%">
  <LineChart data={data}>
```

---

## üß™ Testing

### Testes Visuais
- [ ] iPhone SE (375px): Gr√°ficos leg√≠veis, n√£o cortados
- [ ] iPhone 12 Pro (390px): Layout equilibrado
- [ ] iPad (768px): 2 colunas no StatsGrid
- [ ] Desktop (1440px): 4 colunas no StatsGrid, 2 gr√°ficos lado a lado

### Testes de Intera√ß√£o
- [ ] Clicar em "Ver todas" abre `/oportunidades`
- [ ] Clicar em oportunidade abre detalhe
- [ ] Gr√°ficos renderizam sem erro (dados mockados ou reais)

### Performance
- [ ] Lighthouse Mobile Performance ‚â• 85
- [ ] Lighthouse Mobile Accessibility ‚â• 90
- [ ] First Contentful Paint < 2s

---

## üìä Definition of Done (DoD)

- [ ] C√≥digo segue Protocol Notecraft‚Ñ¢
  - [ ] Dashboard.tsx ‚â§ 75 linhas (organism)
  - [ ] TypeScript strict mode
  - [ ] Mobile-first (p-4 md:p-6)
- [ ] Testes manuais passando
  - [ ] 3 dispositivos testados (iPhone SE, iPad, Desktop)
  - [ ] Gr√°ficos leg√≠veis em todas resolu√ß√µes
- [ ] Lighthouse Mobile ‚â• 85
- [ ] Code review aprovado
- [ ] Demonstra√ß√£o funcional para stakeholders

---

## üé¨ Demo Script (Apresenta√ß√£o)

**Cen√°rio**: Vendedor verifica m√©tricas do dia no celular

**Passos**:
1. Abrir Dashboard em iPhone (375px width)
2. Ver 4 cards de m√©tricas (empilhados verticalmente)
3. Scroll down: Gr√°fico de vendas leg√≠vel (height reduzido)
4. Scroll down: Gr√°fico de funil leg√≠vel
5. Scroll down: Lista de oportunidades (cards mobile)
6. Clicar em "Ver todas" ‚Üí navega para `/oportunidades`

**Valida√ß√£o**:
- Tempo para visualizar m√©tricas principais < 5 segundos
- Gr√°ficos 100% vis√≠veis sem zoom
- Todos os cliques funcionam (touch targets adequados)

---

## üìù Notas Adicionais

### Descoberta Importante ‚úÖ
Durante o mapeamento, descobrimos que o Dashboard **j√° est√° muito bem feito**:
- Grid responsivo correto
- OpportunitiesTable com Table/Cards alternando
- Charts com ResponsiveContainer

**Esfor√ßo real**: ~30-60 min (n√£o 1-2h estimadas originalmente)

### Componentes Reutiliz√°veis
- `StatsGrid` - J√° responsivo ‚úÖ
- `SalesLineChart`, `FunnelPieChart` - Pequenos ajustes
- `OpportunitiesTable` - J√° alterna Table/Cards ‚úÖ

### Oportunidades de Melhoria Futura (Fora do Escopo)
- ‚è≥ Dashboard personaliz√°vel (drag-and-drop widgets)
- ‚è≥ Filtro de per√≠odo (√∫ltimos 7 dias, 30 dias, etc.)
- ‚è≥ Modo offline (cache de m√©tricas)

---

**Story criada por**: James (Full Stack Developer)
**Data**: 12 de Dezembro de 2025
**Status**: Draft - Pronto para implementa√ß√£o
**Pr√≥xima a√ß√£o**: Implementar Tasks 1-4 (~30-60 min)
